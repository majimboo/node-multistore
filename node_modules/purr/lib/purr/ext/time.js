var vmDate = require('vm').runInNewContext('Date');

function Time() {
  if(!(this instanceof Time)) {
    return Time.apply(Object.create(Time.prototype), arguments);
  }

  var d = new vmDate();

  switch(arguments.length) {
    case 1:
      d = new vmDate(arguments[0]);
      break;
    case 3: case 4: case 5: case 6: case 7:
      d = new vmDate(arguments[0], arguments[1], arguments[2],
                     arguments[3] || null,
                     arguments[4] || null,
                     arguments[5] || null,
                     arguments[6] || null);
    default:
      // do nothing
  }

  d.nanoseconds = d.getMilliseconds() * 1000000;

  return d;
}

Time.prototype = vmDate.prototype;
Time.prototype.type = -2;

Time.prototype.getNanoseconds = function() {
  return this.nanoseconds;
}

Time.prototype.setNanoseconds = function(ns) {
  this.setMilliseconds(Math.floor(ns / 1000000));
  this.nanoseconds = ns;
}

exports.Time = Time;
