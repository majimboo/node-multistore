'use strict';

var assert  = require('assert');
var msgpack = require('msgpack');
var purr    = require('../');

describe('::pack', function() {
  describe('sameness with Messagepack', function() {
    it('should pack strings like MessagePack', function(done) {
      var string = 'foo';

      var p1 = purr.pack(string);
      var p2 = msgpack.pack(string);

      assert.deepEqual(p1, p2);
      done();
    });

    it('should pack integers like MessagePack', function(done) {
      var integer = 123;

      var p1 = purr.pack(integer);
      var p2 = msgpack.pack(integer);

      assert.deepEqual(p1, p2);
      done();
    });

    it('should pack floats like MessagePack', function(done) {
      var f = 1.1;

      var p1 = purr.pack(f);
      var p2 = msgpack.pack(f);

      assert.deepEqual(p1, p2);
      done();
    });

    it('should pack arrays like MessagePack', function(done) {
      var array = [1,2,3];

      var p1 = purr.pack(array);
      var p2 = msgpack.pack(array);

      assert.deepEqual(p1, p2);
      done();
    });

    it('should pack hashes like MessagePack', function(done) {
      var hash = { "foo" : "bar" }

      var p1 = purr.pack(hash);
      var p2 = msgpack.pack(hash);

      assert.deepEqual(p1, p2);
      done();
    });
  });
});
