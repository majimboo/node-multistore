'use strict';

var assert  = require('assert');
var msgpack = require('msgpack');
var util    = require('util');
var purr    = require('../../');

describe('DateObject::unpack', function() {
  it('should deep unpack date objects inside arrays', function(done) {
    var array  = [1,2,[3,4, new purr.Date()],[5,[6]]];
    var packed = purr.pack(array);

    var unpacked = purr.unpack(packed);

    assert.deepEqual(unpacked, array);

    done();
  });

  it('should deep unpack date objects inside hashes', function(done) {
    var hash   = { a : 'a', b: { c : { d: new purr.DateTime() } }, e : 2 };
    var packed = purr.pack(hash);

    var unpacked = purr.unpack(packed);

    assert.deepEqual(unpacked, hash);

    done();
  });

  it('should deep unpack date objects inside collections', function(done) {
    var coll   = [ 1, 2, { a : { b : { c : new purr.Time() } } }, [4,5]];
    var packed = purr.pack(coll);

    var unpacked = purr.unpack(packed);

    assert.deepEqual(unpacked, coll);

    done();
  });
});
