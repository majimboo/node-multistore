{
  'targets' : [
    {
      'target_name'   : 'purrPacker',
      'sources'       : [ 'src/purr_packer.cc' ],
      'include_dirs'  : [ "<!(node -e \"require('nan')\")",
                          'node_modules/msgpack/deps/msgpack',
                          'node_modules/msgpack/src' ],
      'dependencies'  : [ 'node_modules/msgpack/deps/msgpack/msgpack.gyp:libmsgpack' ],

      'cflags_cc'     : [ '-Wall', '-O3', '-D__STDC_CONSTANT_MACROS' ],
      'cflags'        : [ '-Wall', '-O3', '-D__STDC_CONSTANT_MACROS' ],
      'cflags!'       : [ '-fno-exceptions', '-Wno-unused-function' ],
      'cflags_cc!'    : [ '-fno-exceptions', '-Wno-unused-function' ],
      'configurations': {
        'Debug': {
          'cflags_cc!': [ '-O3' ],
          'cflags!'   : [ '-O3' ],
          'cflags_cc' : [ '-g', '-O0', '-ggdb' ],
          'cflags'    : [ '-g', '-O0', '-ggdb' ]
        }
      },
      'conditions': [
        ['OS=="mac"', {
          'configurations': {
            'Debug': {
              'xcode_settings': {
                'GCC_ENABLE_CPP_EXCEPTIONS': 'YES',
                'WARNING_CFLAGS': ['-Wall', '-Wno-unused-function'],
              }
            },

            'Release': {
              'xcode_settings': {
                'GCC_ENABLE_CPP_EXCEPTIONS': 'YES',
                'WARNING_CFLAGS': ['-Wall', '-Wno-unused-function'],
              },
            },
          },
        }],

        ['OS=="win"', {
          'configurations': {
            'Debug': {
              'msvs_settings': {
                'VCCLCompilerTool': {
                  'CompileAs': '2',
                  'ExceptionHandling': '1',
                },
              },
            },
            'Release': {
              'msvs_settings': {
                'VCCLCompilerTool': {
                  'CompileAs': '2',
                  'ExceptionHandling': '1',
                },
              },
            },
          },
        }]
      ]
    }
  ]
}
